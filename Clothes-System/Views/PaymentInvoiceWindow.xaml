<Window x:Class="Clothes_System.Views.PaymentInvoiceWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="سداد العميل" Height="300" Width="400"
        WindowStartupLocation="CenterScreen"
        FlowDirection="RightToLeft"
        Background="#F0F4F8">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ERROR MESSAGE - Simple visibility binding without converter -->
        <TextBlock Grid.Row="0" Text="{Binding ErrorMessage}" 
                   Foreground="Red" FontWeight="Bold" 
                   Margin="0,0,0,15" 
                   TextWrapping="Wrap">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ErrorMessage}" Value="{x:Null}">
                            <Setter Property="Visibility" Value="Collapsed"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding ErrorMessage}" Value="">
                            <Setter Property="Visibility" Value="Collapsed"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding ErrorMessage}">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>

        <!-- PAYMENT DETAILS -->
        <StackPanel Grid.Row="1">
            <!-- PAYMENT METHOD -->
            <StackPanel Margin="0,0,0,15">
                <TextBlock Text="طريقة الدفع" FontWeight="Bold" Margin="0,0,0,6"/>
                <ComboBox Width="220"
                          Height="35"
                          ItemsSource="{Binding PaymentTypes}"
                          SelectedItem="{Binding SelectedPaymentMethod}"
                          FontSize="14"/>
            </StackPanel>

            <!-- AMOUNT -->
            <StackPanel Margin="0,0,0,20">
                <TextBlock Text="المبلغ" FontWeight="Bold" Margin="0,0,0,6"/>
                <TextBox Width="220" Height="35" 
                         Text="{Binding Amount, UpdateSourceTrigger=PropertyChanged}" 
                         FontSize="14"
                         Padding="5"/>
            </StackPanel>
        </StackPanel>

        <!-- BUTTONS -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
            <Button Content="إلغاء" Width="100" Height="35" Margin="10"
                    Background="#DC3545" Foreground="White" FontWeight="Bold"
                    Click="Cancel_Click"/>

            <Button Content="حفظ" Width="100" Height="35" Margin="10"
                    Background="#28A745" Foreground="White" FontWeight="Bold"
                    Command="{Binding SaveCommand}"/>
        </StackPanel>
    </Grid>
</Window>